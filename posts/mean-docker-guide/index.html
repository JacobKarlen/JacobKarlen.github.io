<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="MEAN-stack Development Environment with Docker, TypeScript and Live Reloading" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this post I will go over how to set up a development environment based on the popular MEAN-stack (MongoDB, Express, Angular, Node.js) with docker-compose and Node+Express configured with TypeScript." /><meta property="og:description" content="In this post I will go over how to set up a development environment based on the popular MEAN-stack (MongoDB, Express, Angular, Node.js) with docker-compose and Node+Express configured with TypeScript." /><link rel="canonical" href="http://jacobkarlen.com/posts/mean-docker-guide/" /><meta property="og:url" content="http://jacobkarlen.com/posts/mean-docker-guide/" /><meta property="og:site_name" content="Jacob Karlén" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-15T13:37:42+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MEAN-stack Development Environment with Docker, TypeScript and Live Reloading" /><meta name="twitter:site" content="@jacob_karlen" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-16T09:47:27+01:00","datePublished":"2022-01-15T13:37:42+01:00","description":"In this post I will go over how to set up a development environment based on the popular MEAN-stack (MongoDB, Express, Angular, Node.js) with docker-compose and Node+Express configured with TypeScript.","headline":"MEAN-stack Development Environment with Docker, TypeScript and Live Reloading","mainEntityOfPage":{"@type":"WebPage","@id":"http://jacobkarlen.com/posts/mean-docker-guide/"},"url":"http://jacobkarlen.com/posts/mean-docker-guide/"}</script><title>MEAN-stack Development Environment with Docker, TypeScript and Live Reloading | Jacob Karlén</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/images/jacobkarlen.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jacob Karlén</a></div><div class="site-subtitle font-italic">A blog about software, data and finance.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-briefcase ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/resume/" class="nav-link"> <i class="fa-fw fas fa-file ml-xl-3 mr-xl-3 unloaded"></i> <span>RESUME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/JacobKarlen" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://linkedin.com/in/jacobkarlen" aria-label="linkedin" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://twitter.com/jacob_karlen" aria-label="twitter" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['blog','jacobkarlen.com'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>MEAN-stack Development Environment with Docker, TypeScript and Live Reloading</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MEAN-stack Development Environment with Docker, TypeScript and Live Reloading</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jacob Karlén </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jan 15, 2022, 1:37 PM +0100" prep="on" > Jan 15 <i class="unloaded">2022-01-15T13:37:42+01:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 16, 2022, 9:47 AM +0100" prefix="Updated " > Jan 16 <i class="unloaded">2022-01-16T09:47:27+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3592 words">19 min</span></div></div><div class="post-content"><p>In this post I will go over how to set up a development environment based on the popular <strong>MEAN-stack</strong> (MongoDB, Express, Angular, Node.js) with <strong>docker-compose</strong> and <strong>Node+Express</strong> configured with <strong>TypeScript</strong>.</p><p>It will have live reloading on code changes on both the client and server using docker volumes. I will also go over adding a production version of docker-compose, serving the built Angular application with <strong>Nginx</strong>.</p><p>The project can be found on github here: <a href="https://github.com/JacobKarlen/mean-docker-project">https://github.com/JacobKarlen/mean-docker-project</a>.</p><h1 id="table-of-contents">Table of Contents</h1><ol><li><a href="#prerequisites">Prerequisites and Getting Started</a><li><a href="#client">Setting up and Dockerizing the Angular client</a><li><a href="#server">Setting up the Node+Express Server</a><li><a href="#dockerizing-the-server">Dockerizing the Node+Express Server</a><li><a href="#orchestrating-the-containers-wth-docker-compose">Adding MongoDB and Orchestrating the Docker Containers with docker-compose</a><li><a href="#creating-a-scalable-folder-structure">Adding a Scalable File Structure</a><li><a href="#connecting-all-the-dots-by-creating-a-simple-application">Connecting all the Dots by Creating a Simple Application</a><li><a href="#adding-production-version-of-docker-compose-with-nginx">Adding Production Version of docker-compose with Nginx</a><li><a href="#final-remarks">Final Remarks</a><li><a href="#commands-for-docker-compose">docker-compose commands</a></ol><h2 id="prerequisites">Prerequisites</h2><p>For this guide you will need to have <strong>Docker</strong> installed on your computer - <a href="https://docs.docker.com/get-docker/">https://docs.docker.com/get-docker/</a>. I also assume that you have Node installed - <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>.</p><h2 id="getting-started">Getting Started</h2><p>I first created a project directory and <strong>initialized git</strong>.</p><pre><code class="language-bash:">mdkir mean-docker-boilerplate
cd mean-docker-boilerplate
git init
</code></pre><p>Also make sure to create a <strong>.gitignore</strong> file and <strong>add node_modules/</strong> to it</p><h4 id="gitignore">.gitignore</h4><pre><code class="language-bash:">node_modules/
</code></pre><h2 id="client">Client</h2><p>Let’s start of with setting up the client. First install <strong>Angular CLI</strong> if you don’t already have it.</p><pre><code class="language-bash:">npm install -g @angular/cli
</code></pre><p>Then we want to set up an Angular project in the client directory.</p><pre><code class="language-bash:">ng new client
</code></pre><p>Add a <strong>.dockerignore</strong> file to ignore node_modules and npm-debug.log and add a <strong>Dockerfile</strong> to configure the docker image.</p><h4 id="clientdockerignore">/client/.dockerignore</h4><pre><code class="language-bash:">node_modules
npm-debug.log
</code></pre><h4 id="clientdockerfile">/client/Dockerfile</h4><pre><code class="language-Docker:">FROM  node:16-alpine3.11

WORKDIR  /usr/src/app

#Install app dependencies

#A wildcard is used to ensure both package.json 
#AND package-lock.json are copied

COPY  package*.json  .

#Install any needed packages

RUN  npm  i

#Bundle app source

COPY  .  .

EXPOSE  4200

CMD  [  "npm",  "start"  ]
</code></pre><p>We also want to do some small changes to <strong>package.json</strong> by specifying the path to the ng command in the node_modules directory so it uses the correct one when running in a docker container, as well as specfifying the host in the start script.</p><h4 id="clientpackagejson">/client/package.json</h4><pre><code class="language-json:">...
"scripts": {
	"ng": "./node_modules/.bin/ng",
	"start": "./node_modules/.bin/ng serve --watch --host 0.0.0.0",
	"build": "./node_modules/.bin/ng build",
	"watch": "./node_modules/.bin/ng build --watch --configuration development",
	"test": "./node_modules/.bin/ng test"
},
...
</code></pre><p>Now we should be able to build a docker image and run our <strong>Angular</strong> application inside a <strong>docker container</strong>.</p><pre><code class="language-bash:">docker build -t mean-client:1.0 .
docker run -p 4200:4200 mean-client:1.0
</code></pre><p>And you should now have a fully functional dockerized Angular application that you can access at http://localhost:4200. Let’s move on to dockerizing the Node.js+Express server!</p><h2 id="server">Server</h2><p>In this section we are going to create and dockerize a <strong>Node.js</strong>+<strong>Express</strong> application and configure it to work with TypeScript and live reloading on code changes.</p><p><strong>Credit where credit is due, learned a lot of this through <a href="https://dev.to/dariansampare/setting-up-docker-typescript-node-hot-reloading-code-changes-in-a-running-container-2b2f">Darian Sampare’s blog</a>.</strong></p><p>Let’s cd into our server directory and initialize a <strong>Node</strong> project. This will create a <strong>package.json</strong> file.</p><pre><code class="language-bash:">cd server
npm init
</code></pre><p>To set up the <strong>Node</strong>+<strong>Express</strong> server with TypeScript we will add TypeScript as a development dependancy.</p><pre><code class="language-bash:">npm install typescript --save-dev
</code></pre><p>Let’s also add a src directory in the server directory where the source code will live.</p><pre><code class="language-bash:">mkdir src
</code></pre><p>Now we want to set up a <strong>tsconfig.json</strong> file and change some of the properties to suit our project (note that the properties will not be next to eachother in the actuall tsconfig.json file).</p><pre><code class="language-bash:">npx tsc --init
</code></pre><h4 id="servertsconfigjson">/server/tsconfig.json</h4><pre><code class="language-json:">...
"target": "esnext",
"moduleResolution": "node",
"baseUrl": "./src",
"outDir": "./build"
...
</code></pre><p>The next step is to install and set up Express with TypeScript.</p><pre><code class="language-bash:">npm install --save express
npm install --save-dev @types/express
</code></pre><p>We will now add an <strong>index.ts</strong> file to our <strong>src</strong> directory, which will make up our express application. We will also add a <strong>config.ts</strong> file and a <strong>routes.ts</strong> file to show how this easily can be set up.</p><h4 id="serversrcindexts">/server/src/index.ts</h4><pre><code class="language-typescript:">import  express  from  "express";
import { config } from  "./config";

import { router } from  "./routes";

const  app = express();
  
// Cross Origin middleware

app.use(function(req: express.Request, res: express.Response, next: express.NextFunction) {

	res.header("Access-Control-Allow-Origin", "*");
	res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
	next();

});

app.use("/", router);

app.listen(config.port, () =&gt;  console.log(`Express app listening on ${config.port}!`));
</code></pre><h4 id="serversrcconfigts">/server/src/config.ts</h4><pre><code class="language-typescript:">export  const  config = {
	'port':  process.env.WEB_PORT || 8080,
};
</code></pre><h4 id="serversrcroutests">/server/src/routes.ts</h4><pre><code class="language-typescript:">import express,{ Request, Response, } from "express";
export const router = express.Router();

router.get('/helloworld', async (req: Request, res: Response) =&gt; {
	res.json({
		'message': 'hello world'
	});
});
</code></pre><p>The next step will be to install <strong>ts-node</strong> and <strong>nodemon</strong> to allow for live reloading on code changes.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm install --save-dev ts-node nodemon
</pre></table></code></div></div><p>Like Darian recommends, we will set up nodemon in a separate config file <strong>nodemon.json</strong>.</p><h4 id="servernodemonjson">/server/nodemon.json</h4><pre><code class="language-json:">{
	"verbose": true,
	"ignore": [],
	"watch": ["src/**/*.ts"],
	"execMap": {
		"ts": "node --inspect=0.0.0.0:9229 --nolazy -r ts-node/register"
	}
}
</code></pre><p>The next step would then be to add in scripts for running <strong>nodemon</strong> in our <strong>package.json</strong> in the server directory.</p><h4 id="serverpackagejson">server/package.json</h4><pre><code class="language-json:">...
"scripts": {
	"start": "NODE_PATH=./build node build/index.js",
	"build": "tsc -p .",
	"dev": "./node_modules/.bin/nodemon src/index.ts"
}
...
</code></pre><p>Let’s also install and setup <strong>ESLint</strong> to enforce TypeScript use and help find problems.</p><pre><code class="language-bash:">npm install --save-dev eslint
npx eslint --init
</code></pre><p>Now you should be able to run the server in development mode with</p><pre><code class="language-bash:">npm run dev
</code></pre><p>and the server will reload on changes in the source code. Hooray!</p><h2 id="dockerizing-the-server">Dockerizing the server</h2><p>Let’s move on and start dockerizing the server! The first step will be to create a <strong>.dockerignore-file</strong> and adding node_modules and npm-debug.log to it to ignore these from being added.</p><h4 id="serverdockerignore">/server/.dockerignore</h4><pre><code class="language-bash:">node_modules
npm-debug.log
</code></pre><p>Now we can go ahead and create the <strong>Dockerfile</strong> just like we did for the client.</p><h4 id="serverdockerfile">/server/Dockerfile</h4><pre><code class="language-Docker:">FROM node:16-alpine3.11 as base

# Create app directory
WORKDIR /usr/src/app

# Install app dependencies
# A wildcard is used to ensure both package.json AND package-lock.json are copied
# where available (npm@5+)
COPY package*.json ./

# Install any needed packages
RUN npm install

# Bundle app source
COPY . .

FROM base as production

ENV NODE_PATH=./build

RUN npm run build

EXPOSE 8080

CMD [ "npm", "start" ]
</code></pre><p>Let’s go over the main things of the Dockerfile. First of we use the node-alpine image as our base since it requires considerably less memory than the official node images, and we don’t require a lot of additional dependecies for this project.</p><p>Then we specify the working directory of where our app will live, and on the line after it we copy over package.json (and package-lock.json), which is needed for the npm install command on the line below. After this we copy over the actuall source code.</p><p>We also define an additional build step for the production image where we define the Node_Path to our build-folder where the transpiled JavaScript will be outputted. We also define what port is to be exposed and the default command that should be executed when a docker container is instantiated from the image.</p><p>Now you should be able to run the server in a docker container with the following steps:</p><pre><code class="language-bash:">docker build -t mean-server:1.0 .
docker run -p 8080:8080 mean-server:1.0
</code></pre><p>And a request to <strong>localhost:8080/helloworld</strong> should give back: { message: “hello world }.</p><h2 id="orchestrating-the-containers-wth-docker-compose">Orchestrating the Containers wth docker-compose</h2><p>The next step will be to create docker-compose files for orchestrating the client and server containers, and also add in MongoDB into the mix, running in its own container.</p><p>First we will create a development version of the docker-compose file in the project’s root directory:</p><h4 id="docker-composedevyml">/docker-compose.dev.yml</h4><pre><code class="language-Docker:">version: '3'  # specify docker-compose version

# Define the services/containers to be run
services:
  client:
    build: ./client
    ports:
      - "4200:4200"
      - "9229:9229"
    volumes:
      - ./client/src:/usr/src/app/src
  server: # name of the first service
    build:
      context: ./server  # specify the directory of the Dockerfile
      target: base
    ports:
      - "8080:8080"
    environment:
      - MONGO_URL=mongodb://database/mean-app
    volumes:
      - ./server/src:/usr/src/app/src
      - ./server/nodemon.json:/usr/src/app/nodemon.json
    links:
      - database
    depends_on:
      - database
    command: npm run dev
  database: # name of the third service
    image: mongo  # specify image to build container from
    volumes:
      - mongodb:/data/db
      - mongodb_config:/data/configdb
    ports:
      - "27017:27017"  # specify port forewarding
volumes:
  mongodb:
  mongodb_config:
</code></pre><p>This defines the three services <strong>client</strong>, <strong>server</strong> and <strong>database</strong> and basically automates everything so we only have to run a single command in order to spin up the three containers.</p><p>We use volumes in order to share the code base to be available in the containers. This is needed for live reloading to work, since without the volumes, your local changes would not affect the code base in the container, so the changes would not be registered and the server would not restart.</p><p>The first two services, client and server, doesn’t need a specified image since it will automatically use the Dockerfile in client-directory and server-directory.</p><p>We’ve also set up a link to the database from the server service, so that this connection works properly. All services also have a definition of the ports exposed for each server. Client also exposes 9229 for debugging purposes when using nodemon.</p><p>In a similar fashion you can add a <strong>docker-compose.yml</strong>-file that specifies the production build. In that cause you don’t need volumes for hot reloading etc.</p><p>To run the entire development environment now only requires one command:</p><pre><code class="language-bash:">docker-compose -f docker-compose.dev.yml up --build
</code></pre><p>I would say this is extremely convenient, and later when you want to build and run the production version you would just substitute <strong>docker-compose.dev-yml</strong> with <strong>docker-compose.yml</strong>.</p><h2 id="creating-a-scalable-folder-structure">Creating a Scalable Folder Structure</h2><p>Now that we got a working environment where everything is running in docker containers, it would be nice to improve upon the folder structure of the project to make it more maintainable and scalable. A lot of this is based on a <a href="https://itnext.io/choosing-a-highly-scalable-folder-structure-in-angular-d987de65ec7">blog post</a> by <strong>Mathis Garberg</strong>. Check it out if you want more details.</p><h3 id="client-1">Client</h3><p>We will start with the client and set up this structure:</p><ul><li>/app<ul><li>/modules<ul><li>/module1<ul><li>/components<li>/pages<li>module1.module.ts</ul><li>/module2…</ul><li>/core<ul><li>/header<li>/footer<li>/mocks<li>/services</ul><li>/shared<ul><li>/components<li>/models</ul></ul></ul><p>Modules will be used to isolate components and pages related to a particular area of the application. The pages folder will only include Angular components that represent an actual page of the application, and this components act like wrappers for other module components, which are located in the components directory.</p><p>The core directory holds global components like the application header and footer, as well as mocks (delivering fake data) and services that can be used to inject data into components.</p><p>The shared directory holds components that can be useful in multiple modules or not directly related to any module. It also includes a folder of all of the models (TypeScript interfaces) used in the application.</p><p>The app folder will also include the actual app component, the app-routing module and the app module. Routing can also be separated on a module-level later if the routing becomes complex within the application.</p><h3 id="server-1">Server</h3><p>The server structure will be a bit more basic in this case, but I’ll add it as well so all the information is available.</p><ul><li>/src<ul><li>/models<ul><li>user.ts<li>..</ul><li>/routes<ul><li>user-routes.ts<li>…</ul><li>/data<ul><li>users.json</ul><li>/index.ts<li>/config.ts<li>…</ul></ul><h2 id="connecting-all-the-dots-by-creating-a-simple-application">Connecting all the Dots by Creating a Simple Application</h2><p>Lets create a boilerplate User component fetching users stored in the database from the server with an Angular service.</p><h3 id="server-2">Server</h3><p>Let’s start by adding some users to the system. We will generate some fake users with <a href="https://www.mockaroo.com/">mockaroo</a> and save it in <strong>/server/data/users.json</strong>. We can then use this to initialize the database from later.</p><h4 id="serverdatausersjson">/server/data/users.json</h4><pre><code class="language-json:">[{
	"first_name": "Ellary",
	"last_name": "Risbridge",
	"email": "erisbridge0@surveymonkey.com",
	"gender": "Female",
	"city": "Briey",
	"ip_address": "96.251.105.79"
}, {
	"first_name": "Ferris",
	"last_name": "Lawerence",
	"email": "flawerence1@tripod.com",
	"gender": "Genderqueer",
	"city": "Miyazaki-shi",
	"ip_address": "124.171.105.119"
}, {
	"first_name": "Peyter",
	"last_name": "Moulds",
	"email": "pmoulds2@slashdot.org",
	"gender": "Male",
	"city": "Conceição do Coité",
	"ip_address": "97.109.239.114"
}, {
	"first_name": "Valentine",
	"last_name": "Leming",
	"email": "vleming3@shutterfly.com",
	"gender": "Male",
	"city": "Santa Cruz",
	"ip_address": "28.46.112.134"
},
...
]
</code></pre><p>We also need to set up the connection to our MongoDB database in our express app, so let’s do that next! First we have to install mongoose as a dependency in <strong>/server</strong>, which we will use for the object modelling of the db in Node.js. We will also install the mongoose TypeScript types.</p><pre><code class="language-bash:">npm install --save mongoose
npm install --save-dev @types/mongoose
</code></pre><p>We will now create a simple user model and a mongoose schema for users in the file <strong>/server/models/user.ts</strong>. We will also create an interface that corresponds to the query result from querying user documents (<strong>UserDoc</strong>):</p><h4 id="servermodelsuserts">/server/models/user.ts</h4><pre><code class="language-TypeScript:">import { Schema, model, Document } from  "mongoose";

export  interface  User {
	first_name: string,
	last_name: string,
	email: string,
	gender: string,
	city: string,
	ip_address: string
}

export  interface  UserDoc  extends  Document, User {}; 
// type that queries of UserModel will return

const  userSchema = new  Schema&lt;User&gt;({
	"first_name": { type:  String , required:  true },
	"last_name": { type:  String , required:  true },
	"email": { type:  String , required:  true },
	"gender": { type:  String , required:  true },
	"city": { type:  String , required:  true },
	"ip_address": { type:  String , required:  true },
});

export  const  UserModel = model&lt;User&gt;('User', userSchema);
</code></pre><p>Let’s also update our <strong>config.ts</strong>-file and add configuration options for MongoDB.</p><h4 id="serverconfigts">/server/config.ts</h4><pre><code class="language-TypeScript:">export const config = {
	'port':  process.env.WEB_PORT || 8080,
	'mongo': {
		'uri':  'mongodb://database/mean-app',
		'options': {
		
		}
	}
};
</code></pre><p>Now we can actually create some routes to serve users to the frontend (our Angular application). Create a file <strong>/server/routes/user-routes.ts</strong> and add some routes to it like below:</p><h4 id="serverroutesuser-routests">/server/routes/user-routes.ts</h4><pre><code class="language-TypeScript:">import express, { Request, Response, } from  "express";
import { Error } from  "mongoose";
import { UserModel, UserDoc } from  "../models/user";

export  const  router = express.Router();

router.get('/users', async (req: Request, res: Response) =&gt; {
	// route for getting all users from the db
	UserModel.find({}, async (err: Error, users: UserDoc) =&gt; {
		res.json(users);
	});
});
</code></pre><p>Now let’s set up the connection to our database in the file <strong>index.ts</strong> and also populate the db from our users.json document on initial db creation.</p><h4 id="serverindexts">/server/index.ts</h4><pre><code class="language-TypeScript:">...
import express, { application } from  "express";
import { config } from  "./config";
import mongoose, { Error }  from  "mongoose";

import { router } from  "./routes";

import { userRouter } from "./routes/user-routes";
import { UserModel, UserDoc } from "./models/user";
// require-syntax used to parse json doc
const USERS = require("./data/users.json");

const app = express();
  
// Connect to MongoDB
console.log('Connection to mongoDb on uri: ' + config.mongo.uri);
mongoose.connect(config.mongo.uri, config.mongo.options);
mongoose.connection.on('error', function(err: Error) {
	console.error('MongoDB connection error: ' + err);
});

// populate db with users if collection doesn't exit
UserModel.findOne({}, async (err: Error, doc: UserDoc) =&gt; {
	if (!doc) {
		UserModel.collection.insertMany(USERS).then(() =&gt;  console.log("Inserted users from JSON"));
	}
});

// Cross Origin middleware
app.use(function(req: express.Request, res: express.Response, next: express.NextFunction) {
	res.header("Access-Control-Allow-Origin", "*");
	res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
	next();
});

app.use("/", router);
app.use('/', userRouter);

app.listen(config.port, () =&gt;  console.log(`Example app listening on ${config.port}!`));

</code></pre><p>Now if you spin up everything with <strong>docker-compose</strong> you should be able to get all the users from the route <strong>localhost:8080/users</strong>.</p><h3 id="client-2">Client</h3><p>Let’s move over to the client-side and create an angular-component for displaying the users.</p><p>Create a module <strong>home</strong> which will represent the start page of our application and wrap the component listing all the users. Below we will list the commands of creating the module.</p><h4 id="start-in-clientsrcappmodules">start in /client/src/app/modules</h4><pre><code class="language-bash:">ng generate module home
cd ./home

mkdir components
cd ./components
ng generate component userlist
cd ..

mkdir pages
cd ./pages
ng generate component home-page
</code></pre><p>When you have executed the commands above, add import HomeModule and add it to the list of imports in <strong>app.module.ts</strong>. Also import <strong>HttpClientModule</strong> and add it to the list (it will be used to make requests to the backend).</p><p>Also, add the <strong>HomePageComponent</strong> as the root route in the file <strong>app-routing.module.ts</strong> like below:</p><pre><code class="language-TypeScript:">...
import { HomePageComponent } from  './modules/home/pages/home-page/home-page.component';

const  routes: Routes = [
	{ path: '', component: HomePageComponent }
];
...
</code></pre><p>I also removed all of the Angular boilerplate code in app.component.html and just left the <strong>&lt;router-outlet&gt;&lt;/router-outlet&gt;</strong> so it is easier to see what we are working on.</p><p>Add the &lt;app-userlist&gt;-element to the HomePageComponent and then we can focus on setting up the userlist.</p><p>Before we continue with the userlist component we will want to add the User-model to the client, as well as creating a service for serving user data. Create a new file in shared/models.</p><h4 id="clientsrcappsharedmodelsuserts">/client/src/app/shared/models/user.ts</h4><pre><code class="language-TypeScript:">export  interface  User {
	first_name: string,
	last_name: string,
	email: string,
	gender: string,
	city: string,
	ip_address: string
}
</code></pre><p>Let’s set up a service that we can use to inject user data into components.</p><h4 id="stand-in-clientsrcappcoreservices">stand in /client/src/app/core/services</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ng generate service user
</pre></table></code></div></div><p>Then we want to add the following to the file <strong>user.service.ts</strong>:</p><h4 id="clientsrcappcoreservicesuserservicets">/client/src/app/core/services/user.service.ts</h4><pre><code class="language-TypeScript:">import { Injectable } from  '@angular/core';
import { HttpClient, HttpHeaders } from  '@angular/common/http';
import { User } from  '../../shared/models/user';
import { Observable } from  'rxjs';

@Injectable({
	providedIn:  'root'
})

export  class  UserService {

	private  usersUrl = 'http://localhost:8080/users/';

	constructor(private  http: HttpClient) { }

	getUsers(): Observable&lt;User[]&gt; {
		return  this.http.get&lt;User[]&gt;(this.usersUrl);
	}

}
</code></pre><p>Now, let’s use the user-service, by injecting it into our userlist component.</p><h4 id="clientsrcappmoduleshomecomponentsuserlistuserlistcomponentts">/client/src/app/modules/home/components/userlist/userlist.component.ts</h4><pre><code class="language-TypeScript:">import { Component, OnInit } from  '@angular/core';
import { UserService } from  'src/app/core/services/user.service';
import { User } from  '../../../../shared/models/user';

@Component({
	selector:  'app-userlist',
	templateUrl:  './userlist.component.html',
	styleUrls: ['./userlist.component.scss']
})

export  class  UserlistComponent  implements  OnInit {

	constructor(private  userService: UserService) {}
	users: User[] = [];

	ngOnInit(): void {
		this.getUsers();
	}

	getUsers(): void {
		this.userService.getUsers().subscribe(users  =&gt;  this.users = users);
	}
}
</code></pre><p>Now we can add some basic html in <strong>userlist.component.html</strong> to render the list of fetched users:</p><h4 id="clientsrcappmoduleshomecomponentsuserlistuserlistcomponenthtml">/client/src/app/modules/home/components/userlist/userlist.component.html</h4><pre><code class="language-html:">&lt;div  class="card highlight-card"&gt;
	&lt;ul&gt;
		&lt;li  *ngFor="let user of users"&gt;
			&lt;span  class="badge"&gt; , &lt;/span&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
&lt;/div&gt;
</code></pre><p>Now when you go to http://localhost:4200 you should be presented with a simple list of the users stored in the MongoDB database.</p><h2 id="adding-production-version-of-docker-compose-with-nginx">Adding Production Version of docker-compose with Nginx</h2><p>Let’s go over how you can set up a production version of your docker-compose file (<strong>docker-compose.pro.yml</strong>). The main difference between the development and the production orchestration is that we are going to build the client and serve the static Angular app with Nginx, instead of using the Angular CLI development server.</p><p>We will therefore rename our current <strong>Dockerfile</strong> in <strong>/client</strong> to <strong>Dockerfile.dev</strong> and create a new file with the name <strong>Dockerfile</strong> used for the production version. Since we are renaming the Dockerfile used for development, we have to change it accordingly in <strong>docker-compose.dev.yml</strong> by specifying <strong>dockerfile: Dockerfile.dev</strong>.</p><h4 id="docker-composedevyml-1">/docker-compose.dev.yml</h4><pre><code class="language-Dockerfile:">...
services:
 client: # name of the first service
   build: 
      context: ./client
      dockerfile: Dockerfile.dev
   ports:
     - "80:4200"
     - "9229:9229"
   volumes:
...
</code></pre><h4 id="clientdockerfile-production-version">/client/Dockerfile (production version)</h4><pre><code class="language-Dockerfile:"># Stage 1: build and compile
FROM node:16-alpine3.11 as build-stage
 
WORKDIR /usr/src/app
 
# A wildcard is used to ensure both package.json AND package-lock.json are copied
COPY package*.json .
 
# Install app dependencies
RUN npm i
 
# Bundle app source
COPY . .

ARG configuration=production

RUN echo "Configuration: $configuration "
 
RUN npm run build -- --output-path=./dist/out --configuration $configuration

# Stage 2: Nginx
FROM nginx:alpine

COPY --from=build-stage /usr/src/app/dist/out /usr/share/nginx/html
COPY --from=build-stage /usr/src/app/nginx.conf /etc/nginx/conf.d/default.conf
</code></pre><p>In the production version we use a multi-stage build where the first stage (based on Node) builds the Angular application, and the second stage sets up Nginx to serve the static files.</p><p>As you can see at the bottom of the Dockerfile, we also overwrite the default Nginx config with the file <strong>nginx.conf</strong>, so let’s take a look at that.</p><h4 id="clientnginxconf">/client/nginx.conf</h4><pre><code class="language-js:">server {
  listen 80;
  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html =404;
  }
}
</code></pre><p>This pretty much speaks for it self, I will however mention that the try_files part of the location is important to make sure that the Angular routing works properly.</p><p>Next we will look at the production version of the docker-compose file - <strong>docker-compose.pro.yml</strong>.</p><h4 id="docker-composeproyml">/docker-compose.pro.yml</h4><pre><code class="language-Dockerfile:">version: '3' # specify docker-compose version
 
# Define the services/containers to be run
services:
 client: # name of the first service
   build: ./client
   ports:
     - "80:80"
 server: # name of the second service
    build: 
      context: ./server # specify the directory of the Dockerfile
      target: base
    ports:
     - "8080:8080"
    environment:
     - MONGO_URL=mongodb://database/mean-app
    links:
     - database
    depends_on:
     - database
    command: sh -c "npm run build &amp;&amp; npm run start"
 database: # name of the third service
   image: mongo # specify image to build container from
   volumes:
     - mongodb:/data/db
     - mongodb_config:/data/configdb
   ports:
     - "27017:27017" # specify port forewarding
volumes:
  mongodb:
  mongodb_config:
</code></pre><p>Notable changes compared to the development version is that the volumes of the client and server have been removed since we don’t need it anymore to support hot reload of code. We don’t have to explicitly state the client’s Dockerfile here since it will default to the production version called <strong>Dockerfile</strong>, with the multi-stage build.</p><p>Another difference is that we <strong>sh -c “npm run build &amp;&amp; npm run start”</strong> instead of <strong>npm run dev</strong> as the command on container initialization of the server container.</p><p>We have also made a slight addition to the scripts in package.json of the server, by adding <strong>&amp;&amp; cp -r ./src/data ./build</strong> to the build script. This is to copy over any static JSON files from /server/src/data to the build.</p><h4 id="serverpackagejson-1">/server/package.json</h4><pre><code class="language-JSON:">"scripts": {
    "start": "NODE_PATH=./build node build/index.js",
    "build": "./node_modules/.bin/tsc -p . &amp;&amp; cp -r ./src/data ./build",
    "dev": "./node_modules/.bin/nodemon src/index.ts"
  },
</code></pre><p>So I think that summarizes the changes and additions that was needed to get the production version of docker-compose working with Nginx.</p><p>I also made some minor and optional changes to the apiEndpoint by prepending the path with /api and stored the apiEndpoint path in /client/src/environments/environment*.ts.</p><h2 id="final-remarks">Final Remarks</h2><p>Okey, so that was quite a lot to take in, but now you should have a fully functional MEAN-stack application running in seperate docker containers, supporting live reload on changes to the source code for both the client and server. The file structure is also scalable, and it includes a super-simple boilerplate example of how to set up services and inject them etc.</p><p>Thanks for reading! Hope it was helpfull, took a while to compile all the information when I was learning docker. :)</p><p>If you missed it in the beginning, the working setup can be found on github here: <a href="https://github.com/JacobKarlen/mean-docker-project">https://github.com/JacobKarlen/mean-docker-project</a>.</p><h2 id="commands-for-docker-compose">Commands for docker-compose</h2><h3 id="start-development-environment-with">Start development environment with</h3><pre><code class="language-bash:">docker-compose -f docker-compose.dev.yml up --build
</code></pre><h3 id="start-production-environment-with">Start production environment with</h3><pre><code class="language-bash:">docker-compose -f docker-compose.pro.yml up --build
</code></pre></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web-development/'>Web Development</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/angular/" class="post-tag no-text-decoration" >angular</a> <a href="/tags/node/" class="post-tag no-text-decoration" >node</a> <a href="/tags/mean/" class="post-tag no-text-decoration" >mean</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a> <a href="/tags/web/" class="post-tag no-text-decoration" >web</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/typescript/" class="post-tag no-text-decoration" >typescript</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MEAN-stack Development Environment with Docker, TypeScript and Live Reloading - Jacob Karlén&url=http://jacobkarlen.com/posts/mean-docker-guide/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MEAN-stack Development Environment with Docker, TypeScript and Live Reloading - Jacob Karlén&u=http://jacobkarlen.com/posts/mean-docker-guide/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=MEAN-stack Development Environment with Docker, TypeScript and Live Reloading - Jacob Karlén&url=http://jacobkarlen.com/posts/mean-docker-guide/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/mean-docker-guide/">MEAN-stack Development Environment with Docker, TypeScript and Live Reloading</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/mean/">mean</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/node/">node</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/web/">web</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/jacob_karlen">Jacob Karlén</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/angular/">angular</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/mean/">mean</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/node/">node</a> <a class="post-tag" href="/tags/typescript/">typescript</a> <a class="post-tag" href="/tags/web/">web</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="http://jacobkarlen.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
